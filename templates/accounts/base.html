{% load static %}
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/index.min.css' %}">
    <script src="{% static 'fonts/svgFont.js' %}"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <title>{% block title %}Haron Market{% endblock %}</title>
    {% block extra_head %}{% endblock %}
  </head>
  <body>
    <div class="svg-placeholder" style="border: 0; clip: rect(0 0 0 0); height: 1px;		margin: -1px; overflow: hidden; padding: 0;		position: absolute; width: 1px;"></div>
    <script>document.querySelector('.svg-placeholder').innerHTML = SVG_SPRITE;</script>
    <div class="mainwrap">
      <header class="header-account">
        <div class="container">
          <div>
            <button class="header-account__btn-sidebar js--sidebar-toggle"><img src="{% static 'img/menu.svg' %}" alt=""></button>
          </div>
          <div class="position-relative">
            <a class="header-account__btn-notification _unread" href=""><img src="{% static 'img/ring.svg' %}" alt=""></a>
              <div class="header-account__notification">Нет уведомлений
            </div>
            <div class="header-account__name">{{ user.get_full_name|default:user.username }}</div>
            <div class="header-account__avatar"><img src="{% static 'img/user.png' %}" alt=""></div>
            <div class="header-account__btn-menu"><img src="{% static 'img/menu-dotes.svg' %}" alt=""></div>
            <div class="header-account__menu">
              <nav>
                <ul>
                  <li><a class="header-account__menu-link" href="{% url 'accounts:logout' %}">Выйти</a></li>
                  <li>
                    <button class="header-account__menu-link" data-bs-toggle="modal" data-bs-target="#account-settings">Настройки</button>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </header>
      <div class="sidebar"><a class="sidebar__logo" href="{% url 'core:index' %}">
          <div class="_img"><img src="{% static 'img/item.svg' %}" alt=""></div>HaronMarket</a>
        <nav class="sidebar__nav">
          <ul>
            <li><a class="sidebar__link {% if request.resolver_match.url_name == 'account-main' %}active{% endif %}" href="{% url 'accounts:account-main' %}"><img src="{% static 'img/icon-doc.svg' %}" alt=""> Главная</a></li>
            {% if catalog_categories %}
            {% for category in catalog_categories %}
            <li>
              <a class="sidebar__link {% if request.resolver_match.url_name == 'account-catalog' and request.GET.category == category.id|stringformat:'d' %}active{% endif %}" href="{% url 'accounts:account-catalog' %}?category={{ category.id }}">
                <img src="{% static 'img/icon-doc.svg' %}" alt=""> {{ category.name }}
              </a>
            </li>
            {% endfor %}
            {% endif %}
          </ul>
        </nav>
        <div class="sidebar__footer">
          <ul>
            <li><a class="sidebar__link" href=""><img src="{% static 'img/icon-doc.svg' %}" alt=""> Пользовательское соглашение</a></li>
            <li><a class="sidebar__link" href=""><img src="{% static 'img/icon-promo.svg' %}" alt=""> Реклама на сайте</a></li>
          </ul>
        </div>
      </div>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
        	$('.sidebar__subnav-toggle').click(function(){
        		$(this).toggleClass('_opened').nextAll('.sidebar__subnav').slideToggle();
        	})
        
        	$('.js--sidebar-toggle').click(function(){
        		$('.sidebar').toggleClass('_opened');
        	})
        
        })
      </script>
      <main>
        {% block content %}{% endblock %}
      </main>
    </div>
    {% block modals %}{% endblock %}
    <script src="{% static 'js/index.js' %}"></script>
    {% block extra_js %}{% endblock %}
  </body>
</html>

